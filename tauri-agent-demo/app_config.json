{
  "llm": {
    "timeout_sec": 180.0
  },
  "agent": {
    "react_max_iterations": 200,
    "base_system_prompt": "You are a helpful AI assistant.",
    "abilities": [
      {
        "id": "tools_all",
        "name": "All Tools",
        "type": "tooling",
        "tools": [
          "*"
        ],
        "prompt": ""
      },
      {
        "id": "rg_search",
        "name": "RG Search",
        "type": "tooling",
        "tools": [
          "rg"
        ],
        "prompt": "Prefer rg for searching file contents."
      },
      {
        "id": "apply_patch",
        "name": "Apply Patch",
        "type": "tooling",
        "tools": [
          "apply_patch"
        ],
        "prompt": "Prefer apply_patch for file modifications; avoid rewriting entire files unless necessary.\napply_patch format (strict):\n  *** Begin Patch\n  *** Update File: path\n  @@\n  - old line\n  + new line\n  *** End Patch\n- Each change line must start with + or -, and context lines must be included under @@ hunks.\n- Do NOT wrap apply_patch content in code fences; send raw patch text only.\n- apply_patch matches by context; if the match is not unique, request more surrounding context.\n- If apply_patch fails due to context, ask for more context and retry."
      },
      {
        "id": "pty_status",
        "name": "Live PTY",
        "type": "workflow",
        "prompt": "Live PTY sessions for this chat:\n{{pty_sessions}}"
      },
      {
        "id": "code_map",
        "name": "Code Map",
        "type": "domain_knowledge",
        "prompt": "{{code_map_prompt}}"
      },
      {
        "id": "tool_json",
        "name": "Tool Arguments JSON",
        "type": "tool_policy",
        "prompt": "If a tool is needed, call it with JSON arguments that match its schema."
      },
      {
        "id": "output_concise",
        "name": "Concise Output",
        "type": "output_format",
        "prompt": "Be concise and actionable."
      },
      {
        "id": "websear",
        "name": "WebSear",
        "type": "tooling",
        "prompt": "Prefer web search for more information.",
        "tools": [
          "search"
        ]
      }
    ],
    "profiles": [
      {
        "id": "default",
        "name": "Default",
        "abilities": [
          "tools_all",
          "rg_search",
          "apply_patch",
          "pty_status",
          "tool_json",
          "output_concise"
        ]
      },
      {
        "id": "search",
        "name": "Search",
        "abilities": [
          "websear"
        ]
      }
    ],
    "default_profile": "default",
    "ast_enabled": true,
    "code_map": {
      "enabled": true,
      "max_symbols": 40,
      "max_files": 20,
      "max_lines": 30,
      "weight_refs": 1.0,
      "weight_mentions": 2.0
    }
  },
  "context": {
    "compression_enabled": true,
    "compress_start_pct": 75,
    "compress_target_pct": 25,
    "min_keep_messages": 1,
    "keep_recent_calls": 10,
    "step_calls": 5,
    "truncate_long_data": true,
    "long_data_threshold": 1000,
    "long_data_head_chars": 600,
    "long_data_tail_chars": 400
  }
}
